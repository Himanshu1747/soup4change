---
import { queryWordPress } from "../lib/wordpress";
/**
 * 1. OPTIMIZED DATA FETCHING
 * Ensure the query is lean and execution is awaited before rendering.
 */
const HOMEPAGE_QUERY = `
query homepage {
  page(id: "/", idType: URI) {
    homepage {

      shopTitle
      shopIntro
      shopimage{
       node {
          sourceUrl
          mediaItemUrl
          altText
        }
      }
      shopButoonLink{
          url
        title
        target
      }
    }
  }
}
`;

const homepageData = await queryWordPress(HOMEPAGE_QUERY);
const page = homepageData?.page;
const homePage = page?.homepage;

// Asset caching variables
const videoPoster = homePage?.videoBanner?.node?.mediaItemUrl || "";
const videoUrl = homePage?.videoMain?.node?.mediaItemUrl || "";
// Astro.response.headers.set('Cache-Control', 'public, s-maxage=600, stale-while-revalidate=30');
---

   <section class="shopdata-sec">
            <div class="container">
                <div class="row gy-3 align-items-center">
                    <div class="col-md-5">
                        <div class="image-shopdata">
                            <img
                                src={homePage?.shopimage?.node?.mediaItemUrl}
                                alt="shop image"
                                width="500"
                                height="600"
                                loading="lazy"
                                decoding="async"
                            />
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="allabout-merche">
                            <h3 class="fs-60">
                                {homePage?.shopTitle || "error"}
                            </h3>
                            <div set:html={homePage?.shopIntro || "error"} />
                            <div class="universal-anchor">
                                <a
                                    href={homePage?.shopButoonLink?.url || "#"}
                                    title={homePage?.shopButtonText || "Shop Now"}
                                    target={homePage?.shopButoonLink?.target ||
                                        "_self"}
                                    class="universal-button"
                                    >{homePage?.shopButtonText || "Shop Now"}</a
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <style>
            /* Container Section */
section.shopdata-sec {
    padding: 60px 0px;
    background: #e3e3e3;
}

/* Image Styling */
.image-shopdata img {
    border-radius: 10px;
}

/* Content & Typography */
.allabout-merche .universal-anchor {
    padding-top: 20px;
}

/* Responsive Adjustments */
@media (max-width: 1399px) {
    section.shopdata-sec {
        padding: 40px 0px;
    }
}

@media (max-width: 991px) {
    section.shopdata-sec {
        padding: 30px 0px;
    }
}
        </style>